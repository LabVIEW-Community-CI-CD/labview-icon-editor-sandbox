ID,Section,Requirement Statement,Type,Priority,Verification Methods (from SRS),Primary Method (select),Acceptance Criteria,Agent Procedure (step-by-step),Evidence to Collect,Owner/Role,Phase/Gate,Status,Date Last Updated,Test Case ID / Link,Upstream Trace,Downstream Trace,Notes
TRW-001,9.1 Workflow Triggering & Scope,The workflow **shall run only** in response to a `workflow_run` of the upstream workflow named **“CI Pipeline (Composite)”**.,Functional,High,"Inspection, Demonstration",Inspection,Only `workflow_run` is declared with `workflows: [CI Pipeline (Composite)]` and `types: [completed]`.,"Open `.github/workflows/tag-and-release.yml`.
Verify `on.workflow_run.workflows` includes `CI Pipeline (Composite)` and `on.workflow_run.types` includes `completed`.
Confirm no other event triggers (`push`, `pull_request`, schedule) are defined for this workflow.",Workflow YAML snippet showing the `on: workflow_run` section.; Screenshot or log of event payload proving trigger source.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 109; Verified .github/workflows/tag-and-release.yml allows only workflow_run from CI Pipeline (Composite) with type completed; no other triggers."
TRW-002,9.1 Workflow Triggering & Scope,The workflow **shall proceed only** when the upstream `workflow_run.conclusion` equals `success`.,Functional,High,Test,Test,Workflow runs when `conclusion=success` and does not run (or exits early) when `conclusion≠success`.,"Create a controlled upstream run with `conclusion=success` and another with `conclusion=failure` (e.g., dispatch or replay).
Observe tag-and-release workflow behavior for both upstream runs.",Two run URLs with conclusions and downstream run status.; Logs showing conditional gate `github.event.workflow_run.conclusion == 'success'`.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 110; Guard present in .github/workflows/tag-and-release.yml to exit unless workflow_run.conclusion == success."
TRW-003,9.1 Workflow Triggering & Scope,The workflow **shall proceed only** when the upstream workflow was triggered by a `push` event.,Functional,High,Test,Test,Downstream workflow proceeds only when upstream `event` is `push`; other events are skipped.,"Ensure the job has an early `if:` guard: `github.event.workflow_run.event == 'push'`.
Trigger an upstream run caused by `push` and one by `pull_request`; observe behavior.",YAML snippet with `if: ${{ github.event.workflow_run.event == 'push' }}`.; Run logs/screens showing skip on non-push events.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 111; Guard present in .github/workflows/tag-and-release.yml to exit unless workflow_run.event == push."
TRW-004,9.1 Workflow Triggering & Scope,"The workflow **shall evaluate the upstream `head_branch`** against a configurable allow‑list of patterns: `main`, `develop`, `release-alpha/*`, `release-beta/*`, `release-rc/*` (default), with support for extension via configuration.",Functional,High,"Analysis/Simulation, Test",Analysis/Simulation,Branches in allow-list proceed; others are blocked with a clear diagnostic.,"Identify the allow-list patterns (e.g., `main`, `develop`, `release-*`).
Verify gate logic evaluates `github.event.workflow_run.head_branch` against the list.
Test with branches matching and not matching the list.",Config file or YAML `if` expression showing pattern check.; Run logs from both allowed and disallowed branches.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 112; Allow-list enforced in .github/workflows/tag-and-release.yml with defaults (main, develop, release-alpha/*, release-beta/*, release-rc/*) and optional extensions via ALLOWED_BRANCH_PATTERNS."
TRW-005,9.1 Workflow Triggering & Scope,"For branches outside the allow‑list, the workflow **shall terminate** with a **no‑op outcome** and perform **no tag or release operations**.",Functional,High,Test,Test,No tags or releases created; logs indicate no-op by branch policy.,"Execute a run from a branch not in the allow-list.
Confirm the workflow exits with a no-op and performs no tag or release operations.",Run log capturing no-op decision.; Release/tags UI showing no changes.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 113; Branch allow-list gate in .github/workflows/tag-and-release.yml exits before tag/release steps for disallowed branches."
TRW-006,9.1 Workflow Triggering & Scope,The workflow **shall define a concurrency group** that ensures only one run per commit SHA is active at a time; subsequent runs for the same SHA **shall cancel** or **queue** per configuration.,Process/Quality,High,"Inspection, Demonstration",Inspection,At most one active run per commit; either queued or cancelled per configuration.,"Open workflow YAML and locate `concurrency:`.
Verify `group` includes the commit SHA (e.g., `${{ github.sha }}`) and `cancel-in-progress: true` (or per policy).
Trigger two runs for the same commit and observe deduping/queuing.",YAML snippet of `concurrency` block.; Run timeline screenshots showing queuing/cancellation.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 114; Concurrency configured in .github/workflows/tag-and-release.yml with group: ${{ github.workflow }}-${{ github.event.workflow_run.head_sha }} and cancel-in-progress: true to ensure one run per commit."
TRW-010,9.2 Versioning & Bump Logic,The workflow **shall compute the next version** from: (a) last reachable tag; (b) parsed semantic version; and (c) commit count since that tag as **BUILD**.,Functional,High,"Analysis/Simulation, Test",Analysis/Simulation,"Version is computed from last tag, parsed semver, and commit count as build number.","Fetch full git history (`fetch-depth: 0`).
Resolve last reachable tag and parse semantic version; determine commit count since tag.
Compute next version candidate.","Logs with last tag, parsed parts, and commit count.; Printed `VERSION_STRING`.",Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 120; Compute-version action derives MAJOR/MINOR/PATCH from last reachable tag, defaults to 0.1.0 if none, and sets BUILD to commit count since that tag."
TRW-011,9.2 Versioning & Bump Logic,"When no previous tag exists, the base version **shall default to `0.1.0`** prior to applying bump rules.",Functional,Medium,Test,Test,"When no prior tag exists, version defaults to configured base (e.g., `0.1.0`).","Delete tags locally/in test repo to simulate no previous tag.
Run version computation routine.",Log excerpt showing base version fallback path.; `VERSION_STRING` value in output.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 121; Compute-version action falls back to base version 0.1.0 when no prior tag exists before applying bump rules."
TRW-012,9.2 Versioning & Bump Logic,"In **PR CI context**, the bump type **shall be determined by PR labels**: `major`, `minor`, or `patch`; exactly one such label shall be present; if none, **default to `patch`**; if multiple, **fail** the computation with a clear diagnostic.",Functional,High,Test,Test,Bump type follows labels; multiple label case fails; none defaults to `patch`.,"Create a PR with label `major`, then with `minor`, then with `patch`.
Create a PR with multiple bump labels to observe failure.
Create a PR with no bump labels to observe default.",CI logs mapping label to bump type.; Failure log for multiple labels.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 122; Compute-version action selects bump from PR labels (major/minor/patch), defaults to patch when none, and fails with a clear diagnostic if multiple labels are present."
TRW-013,9.2 Versioning & Bump Logic,"In **push context on release branches**, the default bump type **shall be at least `patch`** unless overridden by explicit configuration.",Functional,High,Test,Test,Push on release branches yields at least a `patch` bump by default.,"Push commits to a release branch (e.g., `release-alpha/x`).
Observe default bump type selection (≥ patch) unless overridden in config.",Logs showing selected bump type and branch context.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 123; Compute-version action defaults bump to patch on release branches (release-alpha/*, release-beta/*, release-rc/*, release/*) in non-PR contexts."
TRW-014,9.2 Versioning & Bump Logic,"The workflow **shall emit outputs**: `MAJOR`, `MINOR`, `PATCH`, `BUILD_NUMBER`, `VERSION_STRING`, and `IS_PRERELEASE`.",Interface,High,Test,Test,"`MAJOR`, `MINOR`, `PATCH`, `BUILD_NUMBER`, `VERSION_STRING`, and `IS_PRERELEASE` are exported and visible to subsequent steps.",Run the version step and capture exported outputs.,Job output or `GITHUB_OUTPUT` file contents.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 124; Compute-version action exports MAJOR, MINOR, PATCH, BUILD_NUMBER, VERSION_STRING, and IS_PRERELEASE for downstream steps."
TRW-015,9.2 Versioning & Bump Logic,Pre‑release suffix rules **shall** be applied by branch: `release-alpha/*` → `alpha.<BUILD>`; `release-beta/*` → `beta.<BUILD>`; `release-rc/*` → `rc.<BUILD>`; other allowed stable branches → **no suffix**.,Functional,High,Test,Test,"Suffixes match `alpha.<BUILD>`, `beta.<BUILD>`, `rc.<BUILD>`; stable has none.","Execute the workflow on `release-alpha/*`, `release-beta/*`, and `release-rc/*` branches and on a stable branch.
Verify suffix formation per branch and that stable branches have no suffix.",Computed version strings for each branch case.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 125; Compute-version action applies suffixes alpha.<BUILD>, beta.<BUILD>, rc.<BUILD> for release-alpha/beta/rc branches and no suffix for stable branches."
TRW-016,9.2 Versioning & Bump Logic,Stable branches **shall** produce versions **without** any pre‑release suffix; pre‑release branches **shall** include the configured suffix.,Functional,High,Test,Test,Stable branches produce suffix-free versions; prerelease branches include suffix.,"Trigger runs on stable vs prerelease branches.
Confirm that only prerelease branches append a suffix.",Logs showing `IS_PRERELEASE` and final version strings.,Automation QA (Agent),CI Integration,Completed,2025-11-20,,,,"Derived from SRS line 126; Compute-version action marks prerelease branches with suffix and sets IS_PRERELEASE=true; stable branches emit no suffix and IS_PRERELEASE=false."
TRW-020,9.3 Tag Naming & Uniqueness,The tag name format **shall be** `v<MAJOR>.<MINOR>.<PATCH>.<BUILD>`.,Interface,High,"Inspection, Test",Inspection,Tag string matches exact pattern `vX.Y.Z.N`.,"Confirm tag format logic produces `v<MAJOR>.<MINOR>.<PATCH>.<BUILD>` (with optional suffix in version, not in tag).
Generate example tags from computed version.",Printed tag value; regex check result.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 132
TRW-021,9.3 Tag Naming & Uniqueness,"Before creating a tag, the workflow **shall check** for an existing tag with the same name and, if present, **shall retrieve its target SHA**.",Functional,High,Test,Test,"If tag exists, corresponding object SHA is retrieved.","Query repository for tag existence (via `git ls-remote --tags` or API).
Capture SHA if present.",Command output or API response showing tag and SHA.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 133
TRW-022,9.3 Tag Naming & Uniqueness,"If the tag exists and **resolves to the same commit** SHA as the current run, the workflow **shall treat the condition as success** and **shall not** create a duplicate tag; release creation may be skipped per configuration.",Functional,High,Test,Test,Existing tag on same commit is treated as success; no duplicate operations performed.,"Create a tag on the same commit and rerun workflow.
Observe that run treats it as success and optionally skips release creation per config.",Logs indicating detection of same-commit tag and skip path.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 134
TRW-023,9.3 Tag Naming & Uniqueness,"If the tag exists and **resolves to a different commit**, the workflow **shall fail** with a clear conflict diagnostic and **shall not** move or overwrite the tag.",Functional,High,Test,Test,Workflow fails with explicit diagnostic; tag is not moved or overwritten.,"Create a tag with the same name but pointing to a different commit.
Run the workflow and observe failure and no overwrite.",Logs with the two SHAs and failure status.; Tag ref still points to original commit.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 135
TRW-024,9.3 Tag Naming & Uniqueness,The workflow **shall prevent** different branches from generating identical tags by incorporating BUILD and (where applicable) pre‑release suffix rules in §9.2.,Quality/Design Constraint,High,"Analysis/Simulation, Test",Analysis/Simulation,Different branches do not produce identical tags; collision path is blocked.,"Run two branches that could compute the same version (e.g., ensure build numbers or suffixes disambiguate).
Verify the workflow prevents identical tag generation across branches.",Logs showing branch-safe versioning decision.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 136
TRW-030,9.4 Artifact Requirements & Validation,The workflow **shall rely on artifacts** uploaded by the upstream CI run associated with the triggering `workflow_run`.,Functional,High,Demonstration,Demonstration,Workflow downloads artifacts from upstream run.,Verify presence of artifact download step referencing the upstream `workflow_run` ID.,Logs of artifact download with run ID.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 142
TRW-031,9.4 Artifact Requirements & Validation,The workflow **shall download** the artifacts of the triggering `workflow_run`.,Functional,High,Test,Test,Artifacts are retrieved to the runner workspace.,Enumerate artifacts available from `workflow_run` and download them.,Artifact list and local file tree snapshot.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 143
TRW-032,9.4 Artifact Requirements & Validation,The workflow **shall locate exactly one** `.vip` package and **exactly one** release notes Markdown file within the downloaded artifacts.,Functional,High,Test,Test,Exactly one of each required artifact is located.,Search the artifacts for exactly one `.vip` package and exactly one release-notes markdown file.,File list with counts; names of selected files.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 144
TRW-033,9.4 Artifact Requirements & Validation,The filenames of those artifacts **shall contain** the computed `VERSION_STRING` to enforce **version–artifact consistency**.,Quality,High,Test,Test,Both filenames contain the computed version string.,Compare computed `VERSION_STRING` against artifact filenames.,Screenshot or log of filename match check.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 145
TRW-034,9.4 Artifact Requirements & Validation,"If any required artifact is missing or pluralized, the workflow **shall fail** with an actionable diagnostic.",Functional,High,Test,Test,"Workflow fails when artifacts are missing/duplicated, with specific error code/message.","Simulate missing or pluralized artifacts by removing or duplicating files.
Run the workflow to observe failure with actionable diagnostics.",Failure logs including diagnostic details.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 146
TRW-040,9.5 Release Creation & Publishing,The workflow **shall create a draft GitHub Release** and attach the `.vip` and release notes assets.,Functional,High,Test,Test,Draft release exists with both `.vip` and release notes attached.,Call the Releases API (or use action) to create a draft release with assets.,Release page URL and asset list.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 152
TRW-041,9.5 Release Creation & Publishing,The GitHub Release **shall set** the **prerelease flag** according to `IS_PRERELEASE`.,Interface,High,Test,Test,Release `prerelease` flag matches computed `IS_PRERELEASE`.,"Ensure `prerelease` flag in release object follows `IS_PRERELEASE`.
Verify both true and false cases.",API response or UI screenshot for both cases.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 153
TRW-042,9.5 Release Creation & Publishing,"When a release with the computed tag already exists, the workflow **shall update** that release record rather than create a new one.",Functional,Medium,Test,Test,Existing release is updated in place; no duplicate release is created.,"If a release with the computed tag exists, update it rather than creating a new one.","Release history showing updates, not new creation.",Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 154
TRW-043,9.5 Release Creation & Publishing,"Upon successful validation, the workflow **shall publish** the release (transition from draft) and **shall mark it as latest** per repository policy.",Functional,High,Test,Test,Release is published and marked latest (if applicable).,Transition a draft to published and set as latest per repo policy.,Release status in UI/API.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 155
TRW-044,9.5 Release Creation & Publishing,All operations **shall authenticate** using `GITHUB_TOKEN` with `contents: write`.,Interface/Security,High,"Inspection, Test",Inspection,`GITHUB_TOKEN` scopes allow required operations.,"Confirm `GITHUB_TOKEN` permissions include `contents: write`.
Attempt an operation requiring those permissions and confirm success.",Permission settings and successful API call logs.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 156
TRW-050,"9.6 Error Handling, Retries & Robustness","Tag push operations **shall be retried** (minimum 3 attempts, ≥5s back‑off between attempts).",Quality/Reliability,Medium,Test,Test,"Tag push is retried (e.g., 3 attempts, 5s delay) before final failure/success.","Attempt to push tag with a simulated transient error and verify retry mechanism (e.g., mock failure or use retryable command).",Logs showing retry count and delays.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 162
TRW-051,"9.6 Error Handling, Retries & Robustness",Release API operations **shall detect** a not‑found (404) response and **shall create** the release; other API errors **shall be handled gracefully** with diagnostics and non‑destructive behavior.,Quality/Reliability,High,Test,Test,404 triggers creation path; other errors are surfaced with graceful handling.,"Invoke release API to fetch by tag; if 404, create release; handle other codes per policy.",Logs for 404 branch and for non-404 error handling.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 163
TRW-052,"9.6 Error Handling, Retries & Robustness",The workflow **shall be non‑destructive** with respect to existing tags; it **shall never move** an existing tag ref.,Quality/Safety,High,"Inspection, Test",Inspection,Existing tags are never moved automatically.,Create an existing tag and attempt to move it; verify the workflow refuses to force-update.,Git command logs; tag ref remains unchanged.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 164
TRW-053,"9.6 Error Handling, Retries & Robustness","Re‑runs of the workflow for the same commit and computed version **shall be idempotent**, producing no duplicate tags or releases and no conflicting state.",Quality,High,Test,Test,No duplicate tags/releases are created on re-runs; operations are idempotent.,Re-run the workflow for the same commit and inputs twice.,Run history and resulting refs/releases (no duplicates).,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 165
TRW-060,9.7 Observability & Logging,"The workflow **shall log** at start: commit SHA, head branch, upstream `workflow_run` ID, computed `VERSION_STRING`.",Process/Usability,Medium,"Inspection, Demonstration",Inspection,All required context fields are logged in a structured way.,"Check logs include commit SHA, branch, workflow_run ID, and version string.",Log excerpts with the four fields present.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 171
TRW-061,9.7 Observability & Logging,"The workflow **shall log** decision outcomes: bump type, suffix rule applied, tag existence outcome, artifact discovery results.",Process/Usability,Medium,"Inspection, Demonstration",Inspection,Each decision point emits a structured log entry.,"Confirm decision logs for bump, suffix rules, tag existence, and artifact discovery.",Collected log entries covering all decision items.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 172
TRW-062,9.7 Observability & Logging,"All failure conditions **shall include** actionable diagnostics indicating detection point, probable cause, and remediation guidance.",Process/Quality,High,Inspection,Inspection,"Failures include actionable diagnostics (errors, causes, next steps).",Induce a few failure modes and check that detailed diagnostics are emitted.,Failure logs for representative cases.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 173
TRW-070,9.8 Efficiency & Runner Behavior,The workflow **shall perform a single repository checkout** per job.,Process/Efficiency,Medium,Inspection,Inspection,Only one checkout step is present.,Ensure repository uses a single `actions/checkout` per job.,Workflow YAML highlighting checkout usage.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 179
TRW-071,9.8 Efficiency & Runner Behavior,The workflow **shall ensure full Git history** is available for tag reachability and commit counting.,Process/Correctness,High,"Inspection, Test",Inspection,Full git history is available to the job.,Verify `fetch-depth: 0` or equivalent full-history fetch is configured.,Checkout step config and `git rev-list` depth proof.,Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 180
TRW-072,9.8 Efficiency & Runner Behavior,The workflow **shall not leave persistent configuration side effects** on self‑hosted runners (no global git config mutations beyond the job scope).,Process/Safety,High,Inspection,Inspection,Runner state is clean post-run (no orphaned files/tokens/config).,Run on a self-hosted runner and verify no persistent configuration side effects remain after completion.,"Before/after runner state diff, cleanup logs.",Automation QA (Agent),CI Integration,Not Started,2025-11-20,,,,Derived from SRS line 181
